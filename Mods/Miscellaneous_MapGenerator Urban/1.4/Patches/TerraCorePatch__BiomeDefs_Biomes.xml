<?xml version="1.0" encoding="utf-8" ?>
<Patch>

	<Operation Class="PatchOperationSequence">
		<success>Always</success>
		<operations>
			<li Class="PatchOperationTest">
				<xpath>*/TerrainDef[defName="ParchedBarrenGravel"]</xpath>
			</li>
			<li Class="PatchOperationReplace">
				<xpath>/Defs/BiomeDef[defName="BorealForest_UrbanRuins"]/terrainsByFertility</xpath>
				<value>
					<terrainsByFertility>
						<li>
							<terrain>NormalSoil</terrain>
							<min>-999</min>
							<max>0.83</max>
						</li>
						<li>
							<terrain>NormalFertileSoil</terrain>
							<min>0.83</min>
							<max>0.94</max>
						</li>
						<li>
							<terrain>NormalRichSoil</terrain>
							<min>0.94</min>
							<max>999</max>
						</li>
					</terrainsByFertility>
				</value>
			</li>
			<li Class="PatchOperationReplace">
				<xpath>/Defs/BiomeDef[defName="BorealForest_UrbanRuins"]/terrainPatchMakers</xpath>
				<value>
					<terrainPatchMakers>
						<li>
							<perlinFrequency>0.035</perlinFrequency>
							<thresholds>
								<li>
									<terrain>NormalBarrenSoil</terrain>
									<min>0.70</min>
									<max>999</max>
								</li>
							</thresholds>
						</li>
						<li>
							<perlinFrequency>0.015</perlinFrequency>
							<thresholds>
								<li>
									<terrain>WetSoil</terrain>
									<min>0.72</min>
									<max>0.76</max>
								</li>
								<li>
									<terrain>WaterShallow</terrain>
									<min>0.76</min>
									<max>0.96</max>
								</li>
								<li>
									<terrain>WaterChestDeep</terrain>
									<min>0.96</min>
									<max>1.04</max>
								</li>
								<li>
									<terrain>WaterDeep</terrain>
									<min>1.04</min>
									<max>999</max>
								</li>
							</thresholds>
						</li>
						<li>
							<perlinFrequency>0.020</perlinFrequency>
							<thresholds>
								<li>
									<terrain>WetSoil</terrain>
									<min>0.67</min>
									<max>0.78</max>
								</li>
								<li>
									<terrain>WetFertileSoil</terrain>
									<min>0.78</min>
									<max>0.86</max>
								</li>
								<li>
									<terrain>FloodedFertileSoil</terrain>
									<min>0.86</min>
									<max>999</max>
								</li>
							</thresholds>
						</li>
					</terrainPatchMakers>
				</value>
			</li>
			<li Class="PatchOperationAdd">
				<xpath>/Defs/BiomeDef[defName="BorealForest_UrbanRuins"]</xpath>
				<value>
					<modExtensions>
						<li Class="TerraCore.ModExt_Biome_Replacement">
							<sandReplacement>NormalSand</sandReplacement>
							<gravelReplacement>DryGravel</gravelReplacement>
						</li>
					</modExtensions>
				</value>
			</li>
		</operations>
	</Operation>


	<!--=============================== Temperate ===============================-->

	<!-- TemperateForest -->
	<Operation Class="PatchOperationSequence">
		<success>Always</success>
		<operations>
			<li Class="PatchOperationTest">
				<xpath>*/TerrainDef[defName="ParchedBarrenGravel"]</xpath>
			</li>
			<li Class="PatchOperationReplace">
				<xpath>/Defs/BiomeDef[defName="TemperateForest_UrbanRuins"]/terrainsByFertility</xpath>
				<value>
					<terrainsByFertility>
						<li>
							<terrain>NormalSoil</terrain>
							<min>-999</min>
							<max>0.83</max>
						</li>
						<li>
							<terrain>NormalFertileSoil</terrain>
							<min>0.83</min>
							<max>0.94</max>
						</li>
						<li>
							<terrain>NormalRichSoil</terrain>
							<min>0.94</min>
							<max>999</max>
						</li>
					</terrainsByFertility>
				</value>
			</li>
			<li Class="PatchOperationReplace">
				<xpath>/Defs/BiomeDef[defName="TemperateForest_UrbanRuins"]/terrainPatchMakers</xpath>
				<value>
					<terrainPatchMakers>
						<li>
							<perlinFrequency>0.015</perlinFrequency>
							<thresholds>
								<li>
									<terrain>NormalFertileSoil</terrain>
									<min>0.73</min>
									<max>0.80</max>
								</li>
								<li>
									<terrain>WetFertileSoil</terrain>
									<min>0.80</min>
									<max>0.93</max>
								</li>
								<li>
									<terrain>WaterShallow</terrain>
									<min>0.93</min>
									<max>1.01</max>
								</li>
								<li>
									<terrain>WaterChestDeep</terrain>
									<min>1.01</min>
									<max>1.07</max>
								</li>
								<li>
									<terrain>WaterDeep</terrain>
									<min>1.07</min>
									<max>999</max>
								</li>
							</thresholds>
						</li>
						<li>
							<perlinFrequency>0.035</perlinFrequency>
							<thresholds>
								<li>
									<terrain>NormalFertileSoil</terrain>
									<min>0.75</min>
									<max>0.79</max>
								</li>
								<li>
									<terrain>WetFertileSoil</terrain>
									<min>0.79</min>
									<max>0.83</max>
								</li>
								<li>
									<terrain>FloodedFertileSoil</terrain>
									<min>0.83</min>
									<max>1.01</max>
								</li>
								<li>
									<terrain>WaterShallow</terrain>
									<min>1.01</min>
									<max>999</max>
								</li>
							</thresholds>
						</li>
					</terrainPatchMakers>
				</value>
			</li>
			<li Class="PatchOperationAdd">
				<xpath>/Defs/BiomeDef[defName="TemperateForest_UrbanRuins"]</xpath>
				<value>
					<modExtensions>
						<li Class="TerraCore.ModExt_Biome_Replacement">
							<sandReplacement>NormalSand</sandReplacement>
							<gravelReplacement>DryGravel</gravelReplacement>
						</li>
					</modExtensions>
				</value>
			</li>
		</operations>
	</Operation>

	<!-- TemperateSwamp -->
	<Operation Class="PatchOperationSequence">
		<success>Always</success>
		<operations>
			<li Class="PatchOperationTest">
				<xpath>*/TerrainDef[defName="ParchedBarrenGravel"]</xpath>
			</li>
			<li Class="PatchOperationReplace">
				<xpath>/Defs/BiomeDef[defName="TemperateSwamp_UrbanRuins"]/terrainsByFertility</xpath>
				<value>
					<terrainsByFertility>
						<li>
							<terrain>NormalSoil</terrain>
							<min>-999</min>
							<max>0.83</max>
						</li>
						<li>
							<terrain>NormalFertileSoil</terrain>
							<min>0.83</min>
							<max>0.94</max>
						</li>
						<li>
							<terrain>NormalRichSoil</terrain>
							<min>0.94</min>
							<max>999</max>
						</li>
					</terrainsByFertility>
				</value>
			</li>
			<li Class="PatchOperationReplace">
				<xpath>/Defs/BiomeDef[defName="TemperateSwamp_UrbanRuins"]/terrainPatchMakers</xpath>
				<value>
					<terrainPatchMakers>
						<li>
							<perlinFrequency>0.10</perlinFrequency>
							<thresholds>
								<li>
									<terrain>WetSoil</terrain>
									<min>0.36</min>
									<max>0.58</max>
								</li>
								<li>
									<terrain>WetFertileSoil</terrain>
									<min>0.58</min>
									<max>0.92</max>
								</li>
								<li>
									<terrain>FloodedFertileSoil</terrain>
									<min>0.92</min>
									<max>999</max>
								</li>
							</thresholds>
						</li>
						<li>
							<perlinFrequency>0.027</perlinFrequency>
							<thresholds>
								<li>
									<terrain>WetFertileSoil</terrain>
									<min>-0.03</min>
									<max>0.15</max>
								</li>
								<li>
									<terrain>WetRichSoil</terrain>
									<min>0.15</min>
									<max>0.24</max>
								</li>
								<li>
									<terrain>FloodedFertileSoil</terrain>
									<min>0.24</min>
									<max>0.39</max>
								</li>
								<li>
									<terrain>FloodedRichSoil</terrain>
									<min>0.39</min>
									<max>0.63</max>
								</li>
								<li>
									<terrain>WaterShallow</terrain>
									<min>0.63</min>
									<max>999</max>
								</li>
							</thresholds>
						</li>
						<li>
							<perlinFrequency>0.035</perlinFrequency>
							<thresholds>
								<li>
									<terrain>NormalFertileSoil</terrain>
									<min>0.71</min>
									<max>0.76</max>
								</li>
								<li>
									<terrain>WetFertileSoil</terrain>
									<min>0.76</min>
									<max>0.82</max>
								</li>
								<li>
									<terrain>FloodedFertileSoil</terrain>
									<min>0.82</min>
									<max>999</max>
								</li>
							</thresholds>
						</li>
					</terrainPatchMakers>
				</value>
			</li>
			<li Class="PatchOperationAdd">
				<xpath>/Defs/BiomeDef[defName="TemperateSwamp_UrbanRuins"]</xpath>
				<value>
					<modExtensions>
						<li Class="TerraCore.ModExt_Biome_Replacement">
							<sandReplacement>WetSand</sandReplacement>
							<gravelReplacement>NormalGravel</gravelReplacement>
						</li>
					</modExtensions>
				</value>
			</li>
		</operations>
	</Operation>

	<!--=============================== Warm ===============================-->

	<!-- TropicalRainforest -->
	<Operation Class="PatchOperationSequence">
		<success>Always</success>
		<operations>
			<li Class="PatchOperationTest">
				<xpath>*/TerrainDef[defName="ParchedBarrenGravel"]</xpath>
			</li>
			<li Class="PatchOperationReplace">
				<xpath>/Defs/BiomeDef[defName="TropicalRainforest_UrbanRuins"]/terrainsByFertility</xpath>
				<value>
					<terrainsByFertility>
						<li>
							<terrain>NormalSoil</terrain>
							<min>-999</min>
							<max>0.83</max>
						</li>
						<li>
							<terrain>NormalFertileSoil</terrain>
							<min>0.83</min>
							<max>0.94</max>
						</li>
						<li>
							<terrain>NormalRichSoil</terrain>
							<min>0.94</min>
							<max>999</max>
						</li>
					</terrainsByFertility>
				</value>
			</li>
			<li Class="PatchOperationReplace">
				<xpath>/Defs/BiomeDef[defName="TropicalRainforest_UrbanRuins"]/terrainPatchMakers</xpath>
				<value>
					<terrainPatchMakers>
						<li>
							<perlinFrequency>0.04</perlinFrequency>
							<thresholds>
								<li>
									<terrain>WetSoil</terrain>
									<min>0.7</min>
									<max>999</max>
								</li>
							</thresholds>
						</li>
						<li>
							<perlinFrequency>0.035</perlinFrequency>
							<thresholds>
								<li>
									<terrain>WetSoil</terrain>
									<min>0.64</min>
									<max>0.87</max>
								</li>
								<li>
									<terrain>FloodedSoil</terrain>
									<min>0.87</min>
									<max>999</max>
								</li>
							</thresholds>
						</li>
					</terrainPatchMakers>
				</value>
			</li>
			<li Class="PatchOperationAdd">
				<xpath>/Defs/BiomeDef[defName="TropicalRainforest_UrbanRuins"]</xpath>
				<value>
					<modExtensions>
						<li Class="TerraCore.ModExt_Biome_Replacement">
							<sandReplacement>NormalSand</sandReplacement>
							<gravelReplacement>DryGravel</gravelReplacement>
						</li>
					</modExtensions>
				</value>
			</li>
		</operations>
	</Operation>

	<!-- TropicalSwamp -->
	<Operation Class="PatchOperationSequence">
		<success>Always</success>
		<operations>
			<li Class="PatchOperationTest">
				<xpath>*/TerrainDef[defName="ParchedBarrenGravel"]</xpath>
			</li>
			<li Class="PatchOperationReplace">
				<xpath>/Defs/BiomeDef[defName="TropicalSwamp_UrbanRuins"]/terrainsByFertility</xpath>
				<value>
					<terrainsByFertility>
						<li>
							<terrain>NormalSoil</terrain>
							<min>-999</min>
							<max>0.83</max>
						</li>
						<li>
							<terrain>NormalFertileSoil</terrain>
							<min>0.83</min>
							<max>0.94</max>
						</li>
						<li>
							<terrain>NormalRichSoil</terrain>
							<min>0.94</min>
							<max>999</max>
						</li>
					</terrainsByFertility>
				</value>
			</li>
			<li Class="PatchOperationReplace">
				<xpath>/Defs/BiomeDef[defName="TropicalSwamp_UrbanRuins"]/terrainPatchMakers</xpath>
				<value>
					<terrainPatchMakers>
						<li>
							<perlinFrequency>0.04</perlinFrequency>
							<thresholds>
								<li>
									<terrain>WetSoil</terrain>
									<min>0.35</min>
									<max>999</max>
								</li>
							</thresholds>
						</li>
						<li>
							<perlinFrequency>0.027</perlinFrequency>
							<thresholds>
								<li>
									<terrain>WetFertileSoil</terrain>
									<min>-0.1</min>
									<max>0.17</max>
								</li>
								<li>
									<terrain>WetRichSoil</terrain>
									<min>0.17</min>
									<max>0.32</max>
								</li>
								<li>
									<terrain>FloodedFertileSoil</terrain>
									<min>0.24</min>
									<max>0.39</max>
								</li>
								<li>
									<terrain>FloodedRichSoil</terrain>
									<min>0.39</min>
									<max>0.62</max>
								</li>
								<li>
									<terrain>WaterShallow</terrain>
									<min>0.62</min>
									<max>999</max>
								</li>
							</thresholds>
						</li>
						<li>
							<perlinFrequency>0.035</perlinFrequency>
							<thresholds>
								<li>
									<terrain>WetSoil</terrain>
									<min>0.24</min>
									<max>0.48</max>
								</li>
								<li>
									<terrain>FloodedSoil</terrain>
									<min>0.48</min>
									<max>999</max>
								</li>
							</thresholds>
						</li>
					</terrainPatchMakers>
				</value>
			</li>
			<li Class="PatchOperationAdd">
				<xpath>/Defs/BiomeDef[defName="TropicalSwamp_UrbanRuins"]</xpath>
				<value>
					<modExtensions>
						<li Class="TerraCore.ModExt_Biome_Replacement">
							<sandReplacement>WetSand</sandReplacement>
							<gravelReplacement>NormalGravel</gravelReplacement>
						</li>
					</modExtensions>
				</value>
			</li>
		</operations>
	</Operation>

</Patch>